---
title: "Домашка №2"
output: 
  html_document:
    toc: TRUE
    toc_float: TRUE
    toc_depth: 4
    highlight: pygments
editor_options: 
  chunk_output_type: console
---
---

### Правила игры

Вторая домашка нацелена на отработку импорта данных, а также работу с ними.

1. Вторая домашка оформляется в R Markdown.
2. Старайтесь использовать *pipe* (`%>%`), когда будете использовать функции из пакета `dplyr`.
3. Подгрузите все нужные вам пакеты в самом начале в одном чанке.
4. Если задается какой-то вопрос, то нужен не просто ответ, а код, с помощью которого вы нашли этот ответ.

[Ссылка на скачивание архива с данными](https://github.com/ahmedushka7/R/blob/master/docs/homeworks/hw2/data.zip?raw=true)

### Задание 1 (15 баллов)

Есть файлик *random.csv*. Нужно импортировать его в R!:)

### Задание 2 (85 баллов)

#### Набор данных

В наборе данных *nobel.csv* представлена информация об обладателях [нобелевской премии](https://ru.wikipedia.org/wiki/Нобелевская_премия#Правила_премии). Ниже будут перечислены некоторые переменные, которые там есть.

<center>
![](pictures/paint_nobel_prize.png){width=300px}
</center>

* `Year` -- год, в котором была выдана премия
* `Category` -- область, в которой была выдана премия
* `Prize` -- название премии
* `Motivation` -- за что была выдана премия
* `Laureate ID` -- ID лауреата
* `Laureate Type` -- тип награды
* `Full Name` -- полное имя лауреата
* `Birth Date` -- день рождения лауреата
* `Birth City` -- город рождения лауреата
* `Birth Country` -- страна рождения лауреата
* `Sex` -- пол лауреата
* `Organization Name` -- организация, в которой работал лауреат
* `Organization City` -- город, в котором находится организация
* `Organization Country` -- страна, в которой находится организация
* `Death Date` -- дата смерти лауреата
* `Death City` -- город смерти лауреата
* `Death Country` -- страна смерти лауреата

---

#### Задачки

* Подгрузите файлик *nobel.csv*. Набор данных назовите `nobel`. Сколько наблюдений и переменных в этом наборе данных? Давайте выкинем из набора данных переменные, которые находятся в переменной `DROP`. Они нам не понадобятся. (5 баллов)

```{r}
DROP <- c("Prize", "Motivation", "Laureate ID", "Laureate Type", 
          "Organization Name", "Organization City", "Organization Country",
          "Prize Share")
```

* За какой период у нас есть данные? (4 баллов)

* В каких областях и сколько раз выдавалась премия? Какая область оказалась самой "старой" и "молодой"? (4 баллов)

* Сколько раз премию получили мужчины/женщины? (5 баллов)

* Выведите год, область, имя, дату рождения и место рождения всех лауретов, которые родились в России. Сколько таких лауреатов? (6 баллов)

* Найдите топ-20 стран в порядке убывания по количеству лауретов, которые родились в этих странах. Какая страна является топ-1? Сколько лауреатов родились в этой стране? (6 баллов)

* Найдите количество лауреатов, которые родились в Америке, за каждое десятилетие (1900-19009, 1910 - 1919 и так далее). В какое десятилетие было больше всего таких лауреатов? (10 баллов)

* Первая женщина, которая получила нобелевскую премию. Кто она, в каком году и в какой области она ее получила? (5 баллов)

* Найдите людей, которые получали премию больше одного раза. Получал ли кто-то премию 3 раза?  (5 баллов)

* В какие года премию получил **Frederick Sanger**? (5 баллов)

* Кто был самым молодым и самым старым лауреатом в момент получения премии? Мы только частично изучили с вами пакет  `lubridate`. В нем есть функция `year` с помощью которой вы можете вытащить год из даты. (6 баллов)

```{r message=FALSE, warning=FALSE}
library(lubridate)

DATE <- dmy('10/12/2009')
YEAR <- year(DATE)
print(YEAR)
```

* Найти средний возраст лауреатов в годах для каждой области. Вы можете вычитать одну дату из другой и получить разницу между этими датами в днях. Эти дни можно преобразовать к году. Будем считать, что в году всегда 365 дней. Тут может понадобиться функция `as.numeric`. Кто живет дольше всех? (5 баллов)

* Найти средний возраст лауретов в разрезе область-пол. (6 баллов)

* Найдите количество людей, которые родились и умерли в одной стране. Найдите количество людей, которые родились и умерли в одном городе. (8 баллов)

* Найти долю женщин и мужчин получивших премию для каждого десятилетия. (15 баллов)

Функцию `group_by` можно использовать с функцией `mutate`. Например нужно посчитать сумму элементов в каждой группе и проставить это значение каждому наблюдению в группе. 

```{r message=FALSE, warning=FALSE}
library(tibble)
library(dplyr)
df <- tibble(GROUP = rep(c(1,2), each = 3),
             VALUE = seq(10,60, by = 10))
df
df %>%
  group_by(GROUP) %>%
  mutate(SUM = sum(VALUE))
```

